{"ast":null,"code":"var _jsxFileName = \"/home/hudzaifah/React JS/projectMini /src/container/Chat/chat.js\";\nimport React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport \"../chat.css\";\nexport default class chat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.signOut = () => {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n    };\n\n    this.handleImage = () => {\n      const id = this.state.user.id;\n      Axios.put(\"https://atavus.serveo.net/profile/\", {\n        id,\n        avatar: this.state.base64\n      }).then(data => {\n        console.log(\"data :\", data);\n        this.setState({\n          avatar: this.state.avatar\n        });\n      });\n    };\n\n    this.uploadRefresh = () => {\n      const idUser = this.state.user.id;\n      Axios.get(\"https://atavus.serveo.net/api/user/\".concat(idUser)).then(ress => {\n        console.log(\"IdUser\", ress);\n        localStorage.setItem(\"user\", JSON.stringify(ress.data));\n        this.setState({\n          user: ress.data\n        });\n      });\n    };\n\n    this.handleChangeImage = e => {\n      e.preventDefault();\n      let avatar = e.target.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(avatar);\n\n      reader.onloadend = () => {\n        this.setState({\n          avatar: avatar,\n          base64: reader.result\n        });\n        this.uploadRefresh();\n        this.handleImage();\n      };\n    };\n\n    this.state = {\n      user: \"\",\n      avatar: null\n    };\n  }\n\n  componentDidMount(user) {\n    const mystate = localStorage.getItem(\"user\");\n    const dataAdmin = JSON.parse(mystate);\n    this.setState({\n      user: dataAdmin\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem(\"token\", \"user\")) {\n      alert(\"anda belom login\");\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Selamat Datang \", this.state.user.name), React.createElement(\"img\", {\n      style: {\n        width: \"200px\",\n        height: \"200px\"\n      },\n      src: this.state.user.avatar,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"id \", this.state.user.id), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"anda berhasil login\"), React.createElement(\"div\", {\n      className: \"uploadx\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Upload gambar\"), React.createElement(\"input\", {\n      type: \"file\",\n      name: \"\",\n      id: \"\",\n      onChange: this.handleChangeImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: this.handleImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"upload\"), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.signOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Logout\")));\n  }\n\n}","map":{"version":3,"sources":["/home/hudzaifah/React JS/projectMini /src/container/Chat/chat.js"],"names":["React","Component","Link","Redirect","Axios","chat","constructor","props","signOut","localStorage","removeItem","handleImage","id","state","user","put","avatar","base64","then","data","console","log","setState","uploadRefresh","idUser","get","ress","setItem","JSON","stringify","handleChangeImage","e","preventDefault","target","files","reader","FileReader","readAsDataURL","onloadend","result","componentDidMount","mystate","getItem","dataAdmin","parse","render","alert","name","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport \"../chat.css\";\n\nexport default class chat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: \"\",\n      avatar: null\n    };\n  }\n\n  signOut = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n  };\n\n  handleImage = () => {\n    const id = this.state.user.id;\n    Axios.put(\"https://atavus.serveo.net/profile/\", {\n      id,\n      avatar: this.state.base64\n    }).then(data => {\n      console.log(\"data :\", data);\n\n      this.setState({\n        avatar: this.state.avatar\n      });\n    });\n  };\n\n  componentDidMount(user) {\n    const mystate = localStorage.getItem(\"user\");\n    const dataAdmin = JSON.parse(mystate);\n\n    this.setState({ user: dataAdmin });\n  }\n\n  uploadRefresh = () => {\n    const idUser = this.state.user.id;\n    Axios.get(`https://atavus.serveo.net/api/user/${idUser}`).then(ress => {\n      console.log(\"IdUser\", ress);\n      localStorage.setItem(\"user\", JSON.stringify(ress.data));\n      this.setState({\n        user: ress.data\n      });\n    });\n  };\n\n  handleChangeImage = e => {\n    e.preventDefault();\n    let avatar = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsDataURL(avatar);\n    reader.onloadend = () => {\n      this.setState({\n        avatar: avatar,\n        base64: reader.result\n      });\n      this.uploadRefresh();\n\n      this.handleImage();\n    };\n  };\n\n  render() {\n    if (!localStorage.getItem(\"token\", \"user\")) {\n      alert(\"anda belom login\");\n      return <Redirect to=\"/login\" />;\n    }\n    return (\n      <div>\n        <h1>Selamat Datang {this.state.user.name}</h1>\n        <img\n          style={{ width: \"200px\", height: \"200px\" }}\n          src={this.state.user.avatar}\n          alt=\"\"\n        />\n\n        <p>id {this.state.user.id}</p>\n        <p>anda berhasil login</p>\n        <div className=\"uploadx\">\n          <p>Upload gambar</p>\n          <input type=\"file\" name=\"\" id=\"\" onChange={this.handleChangeImage} />\n        </div>\n        <button onClick={this.handleImage}>upload</button>\n        <button type=\"button\" onClick={this.signOut}>\n          <Link to=\"/login\">Logout</Link>\n        </button>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}